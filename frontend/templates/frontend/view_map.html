
<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title>Library Map</title>

        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.js'></script>
            <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.50.0/mapbox-gl.css' rel='stylesheet' />
            <style>
            body { margin:0; padding:0; }
            #map { position:absolute; top:0; bottom:0; width:100%; }
            </style>
            
            <a href="https://icons8.com">Icon pack by Icons8</a>
            </head>
            <body>
            
            
            
            <style>
            .marker {
            display: block;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            padding: 0;
            }
            
            .mapboxgl-popup {
                max-width: 200px;
            }
            
            .mapboxgl-popup-content {
                text-align: center;
                font-family: 'Open Sans', sans-serif;
            }
            </style>
            
            <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.3/mapbox-gl-directions.js'></script>
            <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.3/mapbox-gl-directions.css' type='text/css' />
            <div id='map'></div>
            
            <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoiYWJzdXJkdmFjYXRpb24iLCJhIjoiY2puamxqNXV2MG4yeDNwbGs1MmozcDZvdCJ9.AWfhzxC6hwtwrq8yFbfBOA';
            var geojson = {
            "type": "FeatureCollection",
            "features": [
            {
            
            "type": "Feature",      //clem
            "properties": {
            "description": 'This is Clem' ,
            "title": 'Clem Library',
            "iconSize": [50, 50]
            },
            "geometry": {
            "type": "Point",
            "coordinates": [-78.5059886, 38.0363712]
            }
            },
            {
            "type": "Feature",      //alderman
            "properties": {
            "description": 'This is Alderman Library',
            "title": 'Alderman Library',
            "iconSize": [50, 50]
            },
            "geometry": {
            "type": "Point",
            "coordinates": [
            -78.5054,
            38.0365
            ]
            }
            },
            {
            "type": "Feature",      //clark
            "properties": {
            "description": 'This is Clark Library',
            "title": 'Clark Library',
            "iconSize": [50, 50]
            },
            "geometry": {
            "type": "Point",
            "coordinates": [
            -78.5078,
            38.0330
            ]
            }
            }
            ]
            };
            
            var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            center: [-78.5064, 38.0348],
            zoom: 16
            });
            
        
                
    
            // add markers to map
            geojson.features.forEach(function(marker) {
            // create a DOM element for the marker
            var el = document.createElement('div');
            el.className = 'marker';
            el.style.backgroundImage = 'url("https://img.icons8.com/color/50/000000/library.png")';
            el.style.width = marker.properties.iconSize[0] + 'px';
            el.style.height = marker.properties.iconSize[1] + 'px';
        
            el.addEventListener('click', function() {
            ;
            });
            
            
            // add marker to map
            new mapboxgl.Marker(el)
            .setLngLat(marker.geometry.coordinates)
            .setPopup(new mapboxgl.Popup({offset: 25})

            .setHTML('<h3>' + marker.properties.title + '</h3>   <button type = "button" onclick = "check_in" > Checkin </button>'))

                  <!--.setHTML('<h3>' + marker.properties.description + '</h3>   <a href="{% url 'check_in' %}"> Check In</a>'))-->
            .addTo(map);
            });


            
            // Add geolocate control to the map.
            map.addControl(new mapboxgl.GeolocateControl({
            positionOptions: {
            enableHighAccuracy: true
            },
            trackUserLocation: true
            }));
            
            map.addControl(new MapboxDirections({
                accessToken: mapboxgl.accessToken
            }), 'top-left');
            
            
            </script>
            
            </body>
            </html>
